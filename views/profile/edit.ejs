<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> | NetWorked</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body class="bg-light">
    <%- include('../partials/navbar') %>
    
    <main class="container py-4">
        <%- include('../partials/messages') %>
        
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="card">
                    <div class="card-header bg-transparent">
                        <h4 class="mb-0">Edit Profile</h4>
                    </div>
                    <div class="card-body">
                        <form action="/profile/edit" method="POST" enctype="multipart/form-data">
                            <div class="text-center mb-4">
                                <img src="<%= profileUser.photo %>" alt="Profile" 
                                     class="rounded-circle mb-3" width="120" height="120" style="object-fit: cover;">
                                <div>
                                    <label class="btn btn-outline-primary btn-sm">
                                        <i class="bi bi-camera"></i> Change Photo
                                        <input type="file" name="profilePhoto" class="d-none" accept="image/*">
                                    </label>
                                </div>
                            </div>
                            
                            <h5 class="mb-3">Basic Information</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="firstName" class="form-label">First Name</label>
                                    <input type="text" class="form-control" id="firstName" name="firstName" 
                                           value="<%= profileUser.firstName %>" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="lastName" class="form-label">Last Name</label>
                                    <input type="text" class="form-control" id="lastName" name="lastName" 
                                           value="<%= profileUser.lastName %>" required>
                                </div>
                            </div>
                            
                            <% if (user.role === 'company') { %>
                                <h5 class="mb-3 mt-4">Company Information</h5>
                                <div class="mb-3">
                                    <label for="companyName" class="form-label">Company Name</label>
                                    <input type="text" class="form-control" id="companyName" name="companyName" 
                                           value="<%= profileUser.companyName || '' %>">
                                </div>
                                <div class="mb-3">
                                    <label for="companyDescription" class="form-label">Company Description</label>
                                    <textarea class="form-control" id="companyDescription" name="companyDescription" 
                                              rows="4"><%= profileUser.companyDescription || '' %></textarea>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="industry" class="form-label">Industry</label>
                                        <input type="text" class="form-control" id="industry" name="industry" 
                                               value="<%= profileUser.industry || '' %>">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="companySize" class="form-label">Company Size</label>
                                        <select class="form-select" id="companySize" name="companySize">
                                            <option value="">Select size</option>
                                            <option value="1-10" <%= profileUser.companySize === '1-10' ? 'selected' : '' %>>1-10 employees</option>
                                            <option value="11-50" <%= profileUser.companySize === '11-50' ? 'selected' : '' %>>11-50 employees</option>
                                            <option value="51-200" <%= profileUser.companySize === '51-200' ? 'selected' : '' %>>51-200 employees</option>
                                            <option value="201-500" <%= profileUser.companySize === '201-500' ? 'selected' : '' %>>201-500 employees</option>
                                            <option value="501+" <%= profileUser.companySize === '501+' ? 'selected' : '' %>>501+ employees</option>
                                        </select>
                                    </div>
                                </div>
                            <% } %>
                            
                            <h5 class="mb-3 mt-4">Professional Details</h5>
                            <div class="mb-3">
                                <label for="headline" class="form-label">Headline</label>
                                <input type="text" class="form-control" id="headline" name="headline" 
                                       value="<%= profileUser.headline || '' %>" 
                                       placeholder="e.g., Software Engineer at Company">
                            </div>
                            
                            <div class="mb-3">
                                <label for="bio" class="form-label">About</label>
                                <textarea class="form-control" id="bio" name="bio" rows="4" 
                                          placeholder="Write a summary about yourself..."><%= profileUser.bio || '' %></textarea>
                            </div>
                            
                            <h5 class="mb-3 mt-4">Contact Information</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">Phone</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" 
                                           value="<%= profileUser.phone || '' %>">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="address" class="form-label">Address</label>
                                    <input type="text" class="form-control" id="address" name="address" 
                                           value="<%= profileUser.address || '' %>">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="city" class="form-label">City</label>
                                    <input type="text" class="form-control" id="city" name="city" 
                                           value="<%= profileUser.city || '' %>">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="country" class="form-label">Country</label>
                                    <input type="text" class="form-control" id="country" name="country" 
                                           value="<%= profileUser.country || '' %>">
                                </div>
                            </div>
                            
                            <h5 class="mb-3 mt-4">Social Links</h5>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="website" class="form-label">
                                        <i class="bi bi-globe"></i> Website
                                    </label>
                                    <input type="url" class="form-control" id="website" name="website" 
                                           value="<%= profileUser.website || '' %>" placeholder="https://">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="linkedin" class="form-label">
                                        <i class="bi bi-linkedin"></i> LinkedIn
                                    </label>
                                    <input type="url" class="form-control" id="linkedin" name="linkedin" 
                                           value="<%= profileUser.linkedin || '' %>" placeholder="https://linkedin.com/in/">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="github" class="form-label">
                                        <i class="bi bi-github"></i> GitHub
                                    </label>
                                    <input type="url" class="form-control" id="github" name="github" 
                                           value="<%= profileUser.github || '' %>" placeholder="https://github.com/">
                                </div>
                            </div>
                            
                            <h5 class="mb-3 mt-4">CV Video</h5>
                            <div class="mb-3">
                                <% if (profileUser.cvVideo) { %>
                                    <video controls class="w-100 rounded mb-2" style="max-height: 200px;">
                                        <source src="<%= profileUser.cvVideo %>" type="video/mp4">
                                    </video>
                                <% } %>
                                <label for="cvVideo" class="form-label">Upload CV Video</label>
                                <input type="file" class="form-control" id="cvVideo" name="cvVideo" accept="video/*">
                                <small class="text-muted">Max file size: 50MB. Formats: MP4, WebM, AVI, MOV</small>
                            </div>
                            
                            <hr class="my-4">
                            
                            <div class="d-flex justify-content-between">
                                <a href="/profile" class="btn btn-outline-secondary">Cancel</a>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0">Manage Profile Sections</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <a href="/profile/skills" class="btn btn-outline-primary w-100">
                                    <i class="bi bi-stars me-2"></i>Manage Skills
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="/profile/experience" class="btn btn-outline-primary w-100">
                                    <i class="bi bi-briefcase me-2"></i>Manage Experience
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="/profile/education" class="btn btn-outline-primary w-100">
                                    <i class="bi bi-mortarboard me-2"></i>Manage Education
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="/profile/projects" class="btn btn-outline-primary w-100">
                                    <i class="bi bi-folder me-2"></i>Manage Projects
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <%- include('../partials/footer') %>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/main.js"></script>
</body>
</html>
